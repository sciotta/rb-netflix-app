"use strict";angular.module("RbNetflixApp",["ngCookies","ngResource","ngSanitize","ngRoute","scrollable","angular-ladda"]).config(["$routeProvider","$locationProvider","$interpolateProvider","laddaProvider",function(a,b,c,d){a.when("/",{templateUrl:"views/main.html"}).when("/:repository",{templateUrl:"views/repository.html",controller:"NetflixRepositoryCtrl"}).otherwise({redirectTo:"/"}),d.setOption({style:"expand-left"})}]),angular.module("RbNetflixApp").factory("GithubResource",["$resource",function(a){return a("https://api.github.com/:query/:user/:repo/:spec",{query:"users",user:"netflix",repo:"repos",spec:"",callback:"JSON_CALLBACK",per_page:1e3,page:1},{get:{method:"JSONP"}})}]),angular.module("RbNetflixApp").controller("RepositoriesNavCtrl",["$scope","$rootScope","$routeParams","GithubResource",function(a,b,c,d){b.actualRepo,a.repos=[],a.getRepositories=function(){var e=c.repository;d.get().$promise.then(function(c){if(a.repos=c.data,setTimeout(function(){$("#repositories-list ul").scrollTop(1),$("#repositories-list ul").scrollTop(0)},200),e)for(var d=0;d<c.data.length;d++)a.repos[d].name===e&&(b.actualRepo=a.repos[d],b.actualRepo.selected=!0)})},a.$on("$routeChangeSuccess",a.getRepositories),a.changeRepository=function(a){b.actualRepo&&(b.actualRepo.selected=!1),a.selected=!0,b.actualRepo=a}}]),angular.module("RbNetflixApp").controller("NetflixRepositoryCtrl",["$scope","$rootScope","$routeParams","GithubResource",function(a,b,c,d){a.repositoryName=c.repository,a.allCommitsLoaded=!1,a.commitButtonText="Carregando commits...",a.actualPage=0,a.commits=[],a.loadCommits=function(){a.commitsLoading=!0,a.actualPage=a.actualPage+1,d.get({query:"repos",user:"netflix",spec:"commits",page:a.actualPage,per_page:20,repo:a.repositoryName},function(b){b.data.length<20&&(a.allCommitsLoaded=!0),"Carregando commits..."===a.commitButtonText&&setTimeout(function(){$("#commits-container").scrollTop(1),$("#commits-container").scrollTop(0)},200),a.commitButtonText="Carregar mais",a.commits=a.commits.concat(b.data),a.commitsLoading=!1})},a.loadCommits()}]);